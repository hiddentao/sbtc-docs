<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>sBTC Docs</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction to sBTC</a></li><li class="chapter-item expanded affix "><li class="part-title">User Guides</li><li class="chapter-item expanded "><a href="how-to-deposit-and-withdraw.html"><strong aria-hidden="true">1.</strong> How to Deposit and Withdraw</a></li><li class="chapter-item expanded "><a href="how-to-stacker.html"><strong aria-hidden="true">2.</strong> How to Participate as a Stacker</a></li><li class="chapter-item expanded "><a href="how-to-signer.html"><strong aria-hidden="true">3.</strong> How to Operate a Signer</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="developer-release-signer.html"><strong aria-hidden="true">3.1.</strong> Developer Release</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.2.</strong> Nakamoto Release</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="nakamoto-signer-developer-guide.html"><strong aria-hidden="true">3.2.1.</strong> Nakamoto Signer Get Started</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="applications.html"><strong aria-hidden="true">4.</strong> Applications on sBTC</a></li><li class="chapter-item expanded affix "><li class="part-title">Developer Guides</li><li class="chapter-item expanded "><a href="quickstart.html"><strong aria-hidden="true">5.</strong> Developer Quickstart</a></li><li class="chapter-item expanded "><a href="deposit.html"><strong aria-hidden="true">6.</strong> Initiating a Deposit</a></li><li class="chapter-item expanded "><a href="withdrawal.html"><strong aria-hidden="true">7.</strong> Initiating a Withdrawal</a></li><li class="chapter-item expanded "><a href="sbtc-sdk.html"><strong aria-hidden="true">8.</strong> The sBTC SDK</a></li><li class="chapter-item expanded affix "><li class="part-title">sBTC Design</li><li class="chapter-item expanded "><a href="architecture.html"><strong aria-hidden="true">9.</strong> Architecture Overview</a></li><li class="chapter-item expanded "><a href="sbtc-operations.html"><strong aria-hidden="true">10.</strong> sBTC Requests and Responses</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="sbtc-operations/bitcoin-transactions.html"><strong aria-hidden="true">10.1.</strong> Bitcoin Transactions</a></li><li class="chapter-item expanded "><a href="sbtc-operations/commit-reveal-system.html"><strong aria-hidden="true">10.2.</strong> The Commit-Reveal System</a></li></ol></li><li class="chapter-item expanded "><a href="pox-contract.html"><strong aria-hidden="true">11.</strong> The PoX Contract</a></li><li class="chapter-item expanded "><a href="stacker-responsibilities.html"><strong aria-hidden="true">12.</strong> Stacker responsibilities</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="stacker-responsibilities/frost.html"><strong aria-hidden="true">12.1.</strong> Signature Aggregation with FROST</a></li><li class="chapter-item expanded "><a href="stacker-responsibilities/wsts-adaptation.html"><strong aria-hidden="true">12.2.</strong> WSTS Adaptation</a></li><li class="chapter-item expanded "><a href="stacker-responsibilities/signing-protocol.html"><strong aria-hidden="true">12.3.</strong> Signing Protocol</a></li><li class="chapter-item expanded "><a href="stacker-db.html"><strong aria-hidden="true">12.4.</strong> StackerDB</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">sBTC Project</li><li class="chapter-item expanded "><a href="sbtc-releases.html"><strong aria-hidden="true">13.</strong> sBTC Releases</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-dev.html"><strong aria-hidden="true">13.1.</strong> sBTC 0.1</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-dev/sbtc-dev-reference.html"><strong aria-hidden="true">13.1.1.</strong> Reference implementation plan</a></li><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-dev/get-started.html"><strong aria-hidden="true">13.1.2.</strong> Get Started</a></li><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-dev/get-started-on-devnet.html"><strong aria-hidden="true">13.1.3.</strong> Get Started On Devnet</a></li><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-dev/faq.html"><strong aria-hidden="true">13.1.4.</strong> FAQ</a></li></ol></li><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-dev-v2.html"><strong aria-hidden="true">13.2.</strong> sBTC 0.2</a></li><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-nakamoto.html"><strong aria-hidden="true">13.3.</strong> sBTC 1.0</a></li><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-nakamoto-v2.html"><strong aria-hidden="true">13.4.</strong> sBTC 1.1</a></li></ol></li><li class="chapter-item expanded "><a href="sbtc-roadmap.html"><strong aria-hidden="true">14.</strong> sBTC Roadmap</a></li><li class="chapter-item expanded affix "><li class="part-title">sBTC Compared</li><li class="chapter-item expanded "><a href="wbtc.html"><strong aria-hidden="true">15.</strong> Ethereum wBTC</a></li><li class="chapter-item expanded "><a href="powpeg.html"><strong aria-hidden="true">16.</strong> RSK PowPeg</a></li><li class="chapter-item expanded "><a href="lbtc.html"><strong aria-hidden="true">17.</strong> Liquid L-BTC</a></li><li class="chapter-item expanded "><a href="btcb.html"><strong aria-hidden="true">18.</strong> Avalanche BTC.b</a></li><li class="chapter-item expanded "><a href="tbtc.html"><strong aria-hidden="true">19.</strong> Threshold tBTC</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference</li><li class="chapter-item expanded "><a href="clarity-contracts-reference.html"><strong aria-hidden="true">20.</strong> Clarity Contracts</a></li><li class="chapter-item expanded "><a href="signer-api.html"><strong aria-hidden="true">21.</strong> Signer API</a></li><li class="chapter-item expanded "><a href="faq.html"><strong aria-hidden="true">22.</strong> FAQ</a></li><li class="chapter-item expanded affix "><li class="part-title">Contribute</li><li class="chapter-item expanded "><a href="contribute.html"><strong aria-hidden="true">23.</strong> How to Contribute</a></li><li class="chapter-item expanded "><a href="contributors.html"><strong aria-hidden="true">24.</strong> Contributors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">sBTC Docs</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="welcome"><a class="header" href="#welcome">Welcome</a></h1>
<p>Welcome to the sBTC developer documentation.
Here you will find the most up-to-date description of what sBTC is, how it's implemented and how you can get involved.</p>
<h1 id="introduction-to-sbtc"><a class="header" href="#introduction-to-sbtc">Introduction to sBTC</a></h1>
<p>To understand sBTC, we first need to understand the current limitations of Bitcoin (BTC).</p>
<p>Bitcoin is to date the most secure and decentralized blockchain.
While Bitcoin is the largest cryptocurrency by market cap, comparatively few applications exist within the Bitcoin ecosystem.
Developers interested in building applications for the Bitcoin community often find it difficult or impossible to implement their logic directly on the Bitcoin chain.
Although Bitcoin has a simple scripting system built in, it lacks lacks the expressiveness of many other smart contract languages.</p>
<p>sBTC is for:</p>
<ul>
<li>Bitcoin holders who want to participate in smart contracts.</li>
<li>Developers who want to build applications on Bitcoin.</li>
</ul>
<p>sBTC empowers developers to build applications on Bitcoin by bridging Bitcoin and <a href="https://www.stacks.co/">Stacks</a>.
We achieve this by introducing a fungible token (sBTC) on the Stacks blockchain.
The token has the following properties:</p>
<ul>
<li><strong>Same value as BTC</strong>. sBTC can always be exchanged 1:1 for BTC on the Bitcoin chain, as long as the Stacks blockchain is operational.</li>
<li><strong>Open membership</strong>. Anyone can participate in the sBTC protocol. No centralized entity maintains custody over any BTC in the protocol.</li>
</ul>
<p>Other tokens which try to achieve the same end as sBTC are</p>
<ul>
<li><a href="https://www.stacks.co/blog/tokensoft-wrapped-fundamental-bitcoin-defi-building-blocks-xbtc">xBTC</a></li>
<li><a href="https://github.com/stacks-network/sbtc-docs/issues/2">TODO #2</a> Which other wrapped Bitcoin tokens exist on Stacks?</li>
</ul>
<p>While these tokens all achieve the same value as BTC, they maintain BTC reserves through trusted entities.
sBTC is the only truly decentralized Bitcoin backed asset on Stacks.</p>
<h1 id="how-does-sbtc-work"><a class="header" href="#how-does-sbtc-work">How does sBTC work?</a></h1>
<p>Bitcoin holders can do two things to interact with sBTC, deposit and withdraw.
Both of these operations are controlled through special Bitcoin transactions.</p>
<p>To deposit BTC into sBTC, a Bitcoin holder would create a deposit transaction on the Bitcoin chain.
This deposit transaction informs the protocol how much BTC the holder has deposited, and to which Stacks address the holder wishes to receive the sBTC.
The sBTC system responds to the deposit transaction by minting sBTC to the given Stacks address.</p>
<p>To withdraw BTC, a Bitcoin holder creates a withdrawal transaction on the Bitcoin chain.
This withdrawal transaction informs the protocol how much sBTC the holder wishes to withdraw, from which stacks address th sBTC should be withdrawn and which Bitcoin address should receive the withdrawn BTC.
In response to this transaction, the sBTC system burns the requested amount of sBTC from the given Stacks address and fulfills the withdrawal by issuing a BTC payment to the given BTC address with the same amount.</p>
<p>The following diagram illustrate the deposit and withdrawal flows.</p>
<pre class="mermaid">sequenceDiagram
    Actor Bitcoin holder
    participant Bitcoin
    Actor sBTC Protocol
    participant Stacks

    Bitcoin holder -&gt;&gt; Bitcoin: Deposit transaction
    Bitcoin --&gt;&gt; sBTC Protocol: Read sBTC operations
    sBTC Protocol -&gt;&gt; Stacks: Mint sBTC

    Bitcoin holder -&gt;&gt; Bitcoin: Withdrawal transaction
    Bitcoin --&gt;&gt; sBTC Protocol: Read sBTC operations
    sBTC Protocol -&gt;&gt; Stacks: Burn sBTC
    sBTC Protocol -&gt;&gt; Bitcoin: Fulfill withdrawal
</pre>
<h1 id="where-to-go-next"><a class="header" href="#where-to-go-next">Where to go next?</a></h1>
<p>If you want to use sBTC, check out <a href="./how-to-deposit-and-withdraw.html">How to Deposit and Withdraw</a>.</p>
<p>If you are curious which applications are being built on sBTC, read <a href="./applications.html">Applications using sBTC</a>.</p>
<p>If you want to understand how sBTC achieves a secure open-membership wrapping of Bitcoin, look into the design documentation. A good start is the <a href="./architecture.html">Architecture Overview</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-to-deposit-and-withdraw"><a class="header" href="#how-to-deposit-and-withdraw">How to Deposit and Withdraw</a></h1>
<p>Depositing and withdrawing sBTC can be done in three ways:</p>
<ol>
<li>Using the <a href="https://bridge.stx.eco/">sBTC Bridge</a> application.</li>
<li>Using an sBTC enabled wallet.</li>
<li>Using an app which integrates with sBTC natively.</li>
</ol>
<p>This guide will walk you through how to deposit and withdraw sBTC using the sBTC Brdige application.</p>
<h2 id="perparation"><a class="header" href="#perparation">Perparation</a></h2>
<p>First, make sure you have the <a href="https://wallet.hiro.so/">Hiro Wallet</a> browser extension installed.
Then, to begin your deposit or withdrawal, navigate to <a href="https://bridge.stx.eco/">https://bridge.stx.eco/</a>.
Once there, click the <code>Settings</code> dropdown and make sure you're on the right network.
Thereafter, you should select the appropriate transaction mode:</p>
<ul>
<li>If you want to deposit BTC from your Hiro Wallet, select <code>OP_RETURN</code>.</li>
<li>If you want to deposit BTC from a custodial wallet, select <code>OP_DROP</code>.</li>
</ul>
<p>With these settings in place, you may proceed to do your deposit or withdrawal.</p>
<h2 id="how-to-deposit"><a class="header" href="#how-to-deposit">How to Deposit</a></h2>
<p>To deposit you will be promted to enter</p>
<ol>
<li>Your bitcoin address to deposit from.</li>
<li>A stacks address to receive the sBTC.</li>
<li>The amount to deposit.</li>
</ol>
<p>Once you have entered this information and continue, you will either be prompted to sign a transaction with the Hiro Wallet or receive a QR code to scan depending on your transaction mode.</p>
<p>When you have signed or payed to the QR code you'll get a link to follow your request on the Bitcoin chain. The sBTC should be minted shortly after your request is mined.</p>
<h2 id="how-to-withdraw"><a class="header" href="#how-to-withdraw">How to Withdraw</a></h2>
<p>To withdraw you will be promted to enter</p>
<ol>
<li>Your bitcoin address to receive the BTC which is also used to request the withdrawal.</li>
<li>Your stacks address from which the sBTC should be withdrawn.</li>
<li>The amount to withdraw.</li>
</ol>
<p>You will then be prompted to sign a message payload with the Hiro Wallet to authenticate your request.
Once the request is authenticated you will be prompted to either sign a bitcoin transaction or receive a QR code to scan depending on your transaction mode.</p>
<p>When you have signed or payed to the QR code you'll get a link to follow your request on the Bitcoin chain. The sBTC should be burned shortly after your request is mined.
Thereafter, the system will wait until the sBTC burn is final before fulfilling your withdrawal on the Bitcoin chain. This may take up to 150 bitcoin blocks.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-to-participate-as-a-stacker"><a class="header" href="#how-to-participate-as-a-stacker">How to Participate as a Stacker</a></h1>
<p>Participating as a Stacker in the Stacks Blockchain is an essential role to ensure the liveliness of sBTC. To become a Stacker, you must hold and temporarily lock STX, Stacks’ native currency, and support the network’s security and consensus. As a reward, you earn BTC. </p>
<p>There are multiple ways for you to stack and earn Bitcoin - either <a href="how-to-stacker.html#stacking-through-an-exchange">through an exchange</a>, a <a href="how-to-stacker.html#stacking-through-a-non-custodial-pool">non-custodial pool</a>, or <a href="how-to-stacker.html#independent-stacking">independently</a>. The most appropriate choice depends on your crypto experience and the amount of STX you have at your disposal. For direct participation, Stacks holders need a dynamic minimum amount of STX (approximately 100,000k STX during the mainnet, but this amount fluctuates based on overall participation and supply. See the <a href="https://docs.hiro.so/api#tag/Info/operation/get_pox_info"><code>pox</code> endpoint</a> of the Hiro API to get the minimum of the next cycle). If you don't meet this minimum, you can still participate by leveraging third-party Stacking delegation services. These services enable pooling your holdings with others, allowing joint participation. A complete breakdown of the stacking mechanism can be found in <a href="https://github.com/stacksgov/sips/blob/main/sips/sip-007/sip-007-stacking-consensus.md">SIP-007</a>.</p>
<p>Below is a documentation guide that outlines the steps to participate as a Stacker in the Stacks blockchain network, along with the responsibilities and actions involved in the role. Options for stacking through an exchange a pool can be found on the <a href="https://www.stacks.co/learn/stacking#startstacking">stacks.co stacking page</a>.</p>
<h2 id="stacking-through-an-exchange"><a class="header" href="#stacking-through-an-exchange">Stacking Through an Exchange</a></h2>
<ol>
<li>
<p>Choose an Exchange<br />
Select a reputable cryptocurrency exchange that offers Stacking services for STX.</p>
</li>
<li>
<p>Create an Account<br />
If you don't have an account on the chosen exchange, sign up for one. Complete the necessary verification procedures.</p>
</li>
<li>
<p>Deposit STX<br />
Deposit the desired amount of STX into your exchange account.</p>
</li>
<li>
<p>Navigate to Stacking Section<br />
Go to the Stacking section or menu within the exchange platform.</p>
</li>
<li>
<p>Select Stacking Options<br />
Choose the stacking options that suit your preferences, such as the duration and amount to be stacked.</p>
</li>
<li>
<p>Start Stacking<br />
Confirm the stacking process on the exchange platform. Your STX will be locked for the chosen stacking period, and you'll start earning rewards. The exchange will fulfill your signing obligations on your behalf according to their own configurations.</p>
</li>
<li>
<p>Monitor Stacking Rewards<br />
Keep track of your stacking rewards on the exchange platform. The rewards will typically be automatically credited to your account.</p>
</li>
</ol>
<h2 id="stacking-through-a-non-custodial-pool"><a class="header" href="#stacking-through-a-non-custodial-pool">Stacking Through a Non-Custodial Pool</a></h2>
<ol>
<li>
<p>Choose a Non-Custodial Pool<br />
Research and select a reputable non-custodial Stacking pool that aligns with your preferences and goals.</p>
</li>
<li>
<p>Set Up a Stacks Wallet<br />
Ensure you have a compatible Stacks wallet that supports Stacking. Examples include the Stacks Wallet or other wallets that are Stacking-enabled.</p>
</li>
<li>
<p>Acquire STX<br />
Acquire the desired amount of STX to participate in the Stacking pool.</p>
</li>
<li>
<p>Register with the Pool<br />
Follow the registration process for the chosen Stacking pool. Provide the necessary details, including your wallet address.</p>
</li>
<li>
<p>Delegate Your STX<br />
Delegate your STX holdings to the Stacking pool. This process allows the pool to participate in Stacking on your behalf while your STX remains under your control. The pool will fulfill your signing obligations on your behalf according to their own configurations.</p>
</li>
<li>
<p>Receive Stacking Rewards<br />
As part of the pool, you'll receive Stacking rewards proportionate to your contribution. The rewards will typically be automatically distributed to your wallet by the pool operator.</p>
</li>
</ol>
<h2 id="independent-stacking"><a class="header" href="#independent-stacking">Independent Stacking</a></h2>
<ol>
<li>
<p>Set Up a Stacks Wallet<br />
Choose a compatible Stacks wallet that supports Stacking. Download and install the wallet on your device.</p>
</li>
<li>
<p>Acquire STX<br />
Acquire the dynamic minimum amount of STX required for independent Stacking. As of now, this amount is approximately 100,000k STX, but verify for any updates on this requirement.</p>
</li>
<li>
<p>Setup or Select a Signer<br />
To fulfill your obligation to validate and sign sBTC transactions, you must first select or <a href="how-to-signer.html">setup a Signer</a></p>
</li>
<li>
<p>Register as a Stacker<br />
After setting up your wallet and acquiring the required STX, register as a stacker on the Stacks Blockchain. The registration process may vary based on wallet providers.</p>
</li>
<li>
<p>Start Stacking<br />
Once registered, your wallet will facilitate the process of participating in the Stacking consensus and validating transactions. You will earn STX rewards for your contributions to securing the network.</p>
</li>
</ol>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>Stacking in the Stacks Blockchain is a rewarding way to participate in the network's consensus and earn BTC rewards. Choose the method that aligns with your preferences, and always prioritize security when participating in Stacking. Remember to research the chosen exchange or pool and stay informed about any updates or changes to the Stacking process.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-to-operate-a-signer"><a class="header" href="#how-to-operate-a-signer">How to operate a signer</a></h1>
<p>As a Stacker, you are responsible for ensuring the accuracy and integrity of incoming sBTC transactions. To satisfy this requirement and continue to earn BTC rewards, you must operate your own Signer or delegate your signing power to a third-party Signer. See the step-by-step guide to setting up and operating a Signer either by using the <a href="./nakamoto-signer-developer-guide.html">default Signer implementation</a> or by <a href="./nakamoto-signer-developer-guide.html#custom-signer-implementation">utilizing the Signer SDK</a>.</p>
<!-- ## Prerequisites

Rust. To install, please [follow these instructions](https://www.rust-lang.org/tools/install).
Git

## Setting up a Default Signer

### Building from Source

If you wish to compile the default binary from source, follow the steps outlined below. Otherwise, [download the binary directly](#downloading-the-binary).

1. First, clone the Stacks sBTC mono repository:

```console
git clone https://github.com/Trust-Machines/stacks-sbtc.git
```

2. Next, navigate to the stacks-signer-mini directory:

```console
cd stacks-sbtc/stacks-signer-mini
```

3. Checkout the appropriate release branch you wish to use if you are not using the default main branch

```console
git checkout main
```

4. Compile the signer binary:
   Note the binary path defaults to `target/release/stacks-signer-mini`.

```console
cargo build --release
```

### Downloading the Binary

1. First, download the precompiled default [signer binary](LINK).

2. Untar the file

```console
tar -xvf signer_binary.tar
```

3.  Check Extracted Files:
    After running the untar command, the contents of the tar file should be extracted to the current directory. You should see the signer binary (stacks-signer-mini) and the configuration file (signer.toml) listed among the extracted files.

4.  Next, install the signer.

```console
cargo install --path stacks-signer-mini
```

### Configuring and Running the Binary

1. Generate a key pair:
   Create a cryptographic key pair (public key and private key) to uniquely identify yourself as a Signer.
   Safeguard your private key securely to prevent unauthorized access. There are multiple ways to generate a key pair, but consider using the [Stacks CLI](https://docs.hiro.so/get-started/command-line-interface):

```console
# install CLI globally
npm install --global @stacks/cli

# generate a new account and store details in a new file
# '-t' option makes this a testnet account
stx make_keychain -t > cli_keychain.json
```

2. Update the default config:
   Insert your private key into the conf/signer.toml file and update any mandatory options appropriately. Be sure to update any defaults configurations you like for auto signing transactions. For a breakdown of each configuration option, see [Signer Configuration](./how-to-signer-config.md).

3. Run the binary:

```console
stacks-signer-mini --config conf/signer.toml
```

4. Monitor Incoming Transactions:
   The signer binary operates a web server/client and it can be navigated to by default at http://localhost:3000/.
   Here you can see pending transactions and manually review and sign transactions that cannot be automatically signed on your behalf. Note that manual review is triggered based on the options you have set in your configuration file.

## Custom Signer Implementation

If you wish to have more fine-grained control of the Signer binary and its transaction signing logic, you may wish to take advantage of the [Signer SDK](TODO: LINK TO GITHUB REPO).

1. Set Up a New Rust Project

To add a Signer library to your Rust project and create a main function that utilizes it, follow these step-by-step instructions:

If you don't have an existing Rust project, create one using Cargo, Rust's package manager and build tool:

```bash
cargo new my_signer
cd my_signer
```

Replace `my_signer` with your desired project name.

2. Add Signer Library to the `Cargo.toml` File

Open the `Cargo.toml` file in your project directory and add the Signer library as a dependency under the `[dependencies]` section.

```toml
[dependencies]
signer = "1.0.0"
```

Specify the appropriate version that you wish to use. Make sure to check the latest version available on crates.io.

3. Import the Signer Library in Your Rust Code

In your `main.rs` file (located in the `src` folder by default), import the Signer library at the beginning of the file:

```rust
use signer::Signer;
```

4. Create a Main Function

Add the main function to your `main.rs` file. This is where you'll utilize the Signer library to perform the required actions:

```rust
fn main() {
    // Initialize the signer with a private key
    let signer = Signer::new("your_private_key"); // Replace with the actual private key
    // Must serve web client to utilize manual review
    let _ = signer.serve_http("0.0.0.0", 3000);
    while let Ok(transaction) = signer.retrieve_pending_transaction() {
        // Trigger manual review for a specific address
        if transaction.recipient.to_string() == "mr1iPkD9N3RJZZxXRk7xF9d36gffa6exNC" {
            // Manually approve or deny a transaction
            let _ = signer.trigger_manual_review(transaction);
        } else if transaction.amount > 3418260000 {
            // deny transactions with an amount greater than 1 million USD
            let _ = signer.deny(transaction);
        } else {
            // Approve anything else
            let _ = signer.approve(transaction);
        }
    }
}
```

5. Build and Run Your Signer

Now that you've added the Signer library and created the main function, you can build and run your custom signer using Cargo:

```bash
cargo build
cargo run
``` -->
<div style="break-before: page; page-break-before: always;"></div><h1 id="developer-release"><a class="header" href="#developer-release">Developer Release</a></h1>
<p><a href="./sbtc-releases/sbtc-dev.html">The sBTC Developer Release</a> is a minimum-viable testnet deployment of sBTC and was decided to be released without the complexity of adding a decentralized set of signers to validate sBTC deposits/withdrawals.</p>
<p>Therefore our beloved Developer Release aka Version 0.1 Alpha Romeo only has one single signer that is operated by a central authority.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="what-is-this"><a class="header" href="#what-is-this">What is this</a></h1>
<p>Draft documentation for sBTC Signer specifically for the Nakamoto <a href="https://stacks-network.github.io/sbtc-docs/sbtc-roadmap.html">release</a></p>
<p>The readers of this are assumed to be anyone who is looking to run a sBTC Signer with minimal custom configuration.</p>
<h1 id="disclaimer"><a class="header" href="#disclaimer">Disclaimer</a></h1>
<p>Development is on going and changes to the Signer configuration should be expected. This document will be updated every sprint to ensure its accuracy.</p>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<p>Rust - <a href="https://www.rust-lang.org/tools/install">To install</a>.</p>
<p>Accessible Stacks node - A Stacks node running the stackerDB instance which is used for signer communication and transaction monitoring and broadcasting.</p>
<p>Accessible Bitcoin node - A Bitcoin node used for transaction monitoring and broadcasting.</p>
<p>A Stacks Private Key - Identify your address as a Signer</p>
<h2 id="installing"><a class="header" href="#installing">Installing</a></h2>
<h3 id="building-from-source"><a class="header" href="#building-from-source">Building from Source</a></h3>
<p>If you wish to compile the default binary from source, follow the steps outlined below. Otherwise, download the binary directly (below)</p>
<ol>
<li>First, clone the Stacks sBTC mono repository:</li>
</ol>
<pre><code class="language-console">git clone git@github.com:stacks-network/stacks-blockchain.git
</code></pre>
<ol start="2">
<li>Next, navigate to the stacks-signer directory:</li>
</ol>
<pre><code class="language-console">cd stacks-blockchain/stacks-signer
</code></pre>
<ol start="3">
<li>Checkout the appropriate release branch you wish to use if you are not using the default main branch</li>
</ol>
<pre><code class="language-console">git checkout master
</code></pre>
<ol start="4">
<li>Compile the signer binary:<br />
Note the binary path defaults to <code>target/release/stacks-signer</code>.</li>
</ol>
<pre><code class="language-console">cargo build --release
</code></pre>
<h3 id="downloading-the-binary"><a class="header" href="#downloading-the-binary">Downloading the Binary</a></h3>
<ol>
<li>
<p>First, download the precompiled default <a href="LINK">TODO:NEED:LINK</a>.</p>
</li>
<li>
<p>Untar the file</p>
</li>
</ol>
<pre><code class="language-console">tar -xvf signer_binary.tar
</code></pre>
<ol start="3">
<li>
<p>Check Extracted Files:
After running the untar command, the contents of the tar file should be extracted to the current directory. You should see the signer binary (stacks-signer) and the configuration file (signer.toml) listed among the extracted files.</p>
</li>
<li>
<p>Next, install the signer.</p>
</li>
</ol>
<pre><code class="language-console">cargo install --path stacks-signer
</code></pre>
<h2 id="configuration"><a class="header" href="#configuration">Configuration</a></h2>
<p>The signer takes a TOML config file with the following expected properties</p>
<div class="table-wrapper"><table><thead><tr><th>Key</th><th>Required</th><th>Description</th></tr></thead><tbody>
<tr><td><code>signer_private_key</code></td><td><code>true</code></td><td>Stacks private key of the signer, used for signing sBTC transactions.</td></tr>
<tr><td><code>stacks_node_rpc_url</code></td><td><code>true</code></td><td>Stacks node RPC URL that points to a node running the stackerDB instance which is used for signer communication and transaction monitoring and broadcasting.</td></tr>
<tr><td><code>bitcoin_node_rpc_url</code></td><td><code>true</code></td><td>Bitcoin node RPC URL used for transaction monitoring and broadcasting.</td></tr>
<tr><td><code>stackerdb_event_endpoint</code></td><td><code>true</code></td><td>RPC endpoint for receiving events from <a href="https://github.com/stacks-network/stacks-blockchain/blob/develop/stackslib/src/net/stackerdb/mod.rs">StackerDB</a></td></tr>
<tr><td><code>stackerdb_contract_id</code></td><td><code>false</code></td><td>StackerDB qualified contract ID for Signer communication. Defaults to &quot;ST11Z60137Y96MF89K1KKRTA3CR6B25WY1Y931668.signers-stackerdb&quot;.</td></tr>
<tr><td><code>network</code></td><td><code>false</code></td><td>One of <code>['Signet', 'Regtest', 'Testnet', 'Bitcoin']</code>. Defaults to <code>Testnet</code></td></tr>
<tr><td><code>signer_api_server_url</code></td><td><code>false</code></td><td>Url at which to host the signer api server for transaction monitoring. Defaults to &quot;http://localhost:3000&quot;.</td></tr>
<tr><td><code>auto_deny_block</code></td><td><code>false</code></td><td>Number of blocks before signing deadline to auto deny a transaction waiting for manual review. Defaults to 10.</td></tr>
<tr><td><code>auto_approve_max_amount</code></td><td><code>false</code></td><td>Maximum amount of a transactions that will be auto approved</td></tr>
<tr><td><code>auto_deny_addresses_btc</code></td><td><code>false</code></td><td>List of bitcoin addresses that trigger an auto deny</td></tr>
<tr><td><code>auto_deny_addresses_stx</code></td><td><code>false</code></td><td>List of stx addresses that trigger an auto deny</td></tr>
<tr><td><code>auto_deny_deadline_blocks</code></td><td><code>false</code></td><td>The number of blocks before deadline at which point the transaction will be auto denied. Default is 10 blocks.</td></tr>
</tbody></table>
</div>
<h3 id="example-toml-file"><a class="header" href="#example-toml-file">Example TOML file</a></h3>
<pre><code class="language-toml"># config.toml

# Mandatory fields

# Note: Replace 'MY_PRIVATE_KEY' with the actual private key value
signer_private_key = &quot;MY_PRIVATE_KEY&quot;
stacks_node_rpc_url = &quot;http://localhost:9776&quot;
bitcoin_node_rpc_url = &quot;http://localhost:9777&quot;
revealer_rpc_url = &quot;http://locahost:9778&quot;

# Optional fields
network = &quot;Signet&quot;
auto_approve_max_amount = 500000
auto_deny_addresses_btc = [
	&quot;BTC_ADDRESS_1&quot;,
	&quot;BTC_ADDRESS_2&quot;
]
auto_deny_addresses_stx = [
	&quot;STX_ADDRESS&quot;
]
auto_deny_deadline_blocks = 120
</code></pre>
<h2 id="running-the-binary"><a class="header" href="#running-the-binary">Running the binary</a></h2>
<p>After installing and creating a config file to run the binary</p>
<pre><code class="language-console">stacks-signer --config conf/signer.toml
</code></pre>
<h2 id="monitor-transactions"><a class="header" href="#monitor-transactions">Monitor Transactions</a></h2>
<p>The signer binary operates a web server/client and it can be navigated to by default at http://localhost:3000/ (unless otherwise specified from config). Here you can see pending transactions and manually review and sign transactions that cannot be automatically signed on your behalf. Note that manual review is triggered based on the options you have set in your configuration file.</p>
<h2 id="custom-signer-implementation"><a class="header" href="#custom-signer-implementation">Custom Signer Implementation</a></h2>
<p>If you wish to have more fine-grained control of the Signer binary and its transaction signing logic, you may wish to take advantage of the [Signer SDK](TODO: LINK TO GITHUB REPO).</p>
<ol>
<li>Set Up a New Rust Project</li>
</ol>
<p>To add a Signer library to your Rust project and create a main function that utilizes it, follow these step-by-step instructions:</p>
<p>If you don't have an existing Rust project, create one using Cargo, Rust's package manager and build tool:</p>
<pre><code class="language-bash">cargo new my_signer
cd my_signer
</code></pre>
<p>Replace <code>my_signer</code> with your desired project name.</p>
<ol start="2">
<li>Add Signer Library to the <code>Cargo.toml</code> File</li>
</ol>
<p>Open the <code>Cargo.toml</code> file in your project directory and add the Signer library as a dependency under the <code>[dependencies]</code> section.</p>
<pre><code class="language-toml">[dependencies]
signer = &quot;1.0.0&quot;
</code></pre>
<p>Specify the appropriate version that you wish to use. Make sure to check the latest version available on crates.io.</p>
<ol start="3">
<li>Import the Signer Library in Your Rust Code</li>
</ol>
<p>In your <code>main.rs</code> file (located in the <code>src</code> folder by default), import the Signer library at the beginning of the file:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use signer::Signer;
<span class="boring">}</span></code></pre></pre>
<ol start="4">
<li>Create a Main Function</li>
</ol>
<p>Add the main function to your <code>main.rs</code> file. This is where you'll utilize the Signer library to perform the required actions:</p>
<pre><pre class="playground"><code class="language-rust">fn main() {
    // Initialize the signer with a private key
    let signer = Signer::new(&quot;your_private_key&quot;); // Replace with the actual private key
    // Must serve web client to utilize manual review
    let _ = signer.serve_http(&quot;0.0.0.0&quot;, 3000);
    while let Ok(transaction) = signer.retrieve_pending_transaction() {
        // Trigger manual review for a specific address
        if transaction.recipient.to_string() == &quot;mr1iPkD9N3RJZZxXRk7xF9d36gffa6exNC&quot; {
            // Manually approve or deny a transaction
            let _ = signer.trigger_manual_review(transaction);
        } else if transaction.amount &gt; 3418260000 {
            // deny transactions with an amount greater than 1 million USD
            let _ = signer.deny(transaction);
        } else {
            // Approve anything else
            let _ = signer.approve(transaction);
        }
    }
}</code></pre></pre>
<ol start="5">
<li>Build and Run Your Signer</li>
</ol>
<p>Now that you've added the Signer library and created the main function, you can build and run your custom signer using Cargo:</p>
<pre><code class="language-bash">cargo build
cargo run
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="applications-using-sbtc"><a class="header" href="#applications-using-sbtc">Applications using sBTC</a></h1>
<p>Once we start building on sBTC let's add a list of applications here!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="developer-quickstart"><a class="header" href="#developer-quickstart">Developer Quickstart</a></h1>
<p>A developer guide to quickly build a minimal sBTC application. Will likely use some sort of starter template, the goal here being to provide developer's a fast (under 1 hour) way to be introduced to building with sBTC.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="initiating-a-deposit"><a class="header" href="#initiating-a-deposit">Initiating a Deposit</a></h1>
<p>A developer guide on how to use a wallet like Hiro wallet to set up a transaction that would allow the user to deposit BTC into an app that utilizes sBTC.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="initiating-a-withdrawal"><a class="header" href="#initiating-a-withdrawal">Initiating a Withdrawal</a></h1>
<p>Similar to the deposit guide, this shows developers how to integrate with a wallet to initiate a withdrawal request.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="the-sbtc-sdk"><a class="header" href="#the-sbtc-sdk">The sBTC SDK</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="architecture-overview"><a class="header" href="#architecture-overview">Architecture Overview</a></h1>
<p>In <a href="./introduction.html">Introduction to sBTC</a> we established thath sBTC is a fungible token on the Stacks blockchain, and explained how users interact with the protocol.
This chapter takes a closer look at the major entities in the sBTC protocol and briefly explain how they interact. The following chapters goes into more details on each component.</p>
<p>sBTC builds on the Proof-of-Transfer (PoX) consensus mechanism defined in <a href="https://github.com/stacksgov/sips/blob/main/sips/sip-007/sip-007-stacking-consensus.md">SIP-007</a>.
This SIP introduces the concept of stacking, which is to lock STX for a period of time to earn Bitcoin rewards.
Stacking is performed through a special smart contract, called the PoX contract.
People who stack are called stackers.</p>
<p>In sBTC we introduce the following changes to Stacks consensus:</p>
<ul>
<li>The PoX contract is extended to include sBTC as a <a href="https://github.com/stacksgov/sips/blob/main/sips/sip-010/sip-010-fungible-token-standard.md">SIP-010 fungible token</a>.</li>
<li>Stacks miners must include sBTC mint and burn transactions in their blocks in response to valid sBTC requests on the Bitcoin chain.</li>
<li>Stackers must collectively generate a Bitcoin address every reward cycle and publish it in the PoX contract as the sBTC wallet address.</li>
<li>Stackers are required to respond to sBTC withdrawal requests.</li>
</ul>
<p>The following chart illustrates the main components of sBTC.</p>
<pre class="mermaid">erDiagram
    &quot;PoX Contract&quot; ||--|| &quot;Stacks blockchain&quot; : &quot;Depoloyed on&quot;
    &quot;sBTC Token&quot; }o--|| &quot;PoX Contract&quot;: &quot;Defined in&quot;
    &quot;Stackers&quot; }|--|| &quot;PoX Contract&quot;: &quot;Participate in&quot;
    &quot;sBTC Requests&quot; }o--|| &quot;Stacks blockchain&quot;: &quot;Validated by&quot;
    &quot;Stackers&quot; }|--o{ &quot;sBTC Requests&quot;: &quot;Respond to&quot;
    &quot;User&quot; }o--o{ &quot;sBTC Requests&quot;: &quot;Create&quot;
</pre>
<p>Now that we have established the main components of sBTC, we're ready to dig deeper in the actual workings of it.
The following three chapters explains different aspects of the sBTC design and can be read in any order.</p>
<p><sup class="footnote-reference"><a href="#1">1</a></sup> PoX is the abbreviation for the Proof-of-Transfer consensus mechanism introduced in <a href="https://github.com/stacksgov/sips/blob/main/sips/sip-007/sip-007-stacking-consensus.md">SIP-007</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sbtc-requests-and-responses"><a class="header" href="#sbtc-requests-and-responses">sBTC Requests and Responses</a></h1>
<p>Requests to the sBTC system happen on the Bitcoin blockchain. In this chapter, we explain the two requests that users can create. We go over all information they must contain, and how the sBTC protocol responds to the requests.
For a more in-depth reference on how these requests are represented on the Bitcoin blockchain, see <a href="./sbtc-operations/bitcoin-transactions.html">Bitcoin Transactions</a>.</p>
<h2 id="deposit-request"><a class="header" href="#deposit-request">Deposit Request</a></h2>
<p>When a user wishes to deposit BTC in favor of receiving sBTC, they create a deposit request transaction.
This is a bitcoin transaction sending the requested deposit amount of BTC to the address provided by the Stackers.
In addition, the transaction must also specify to which Stacks address the sBTC should be minted.</p>
<p>The sBTC deposit request transaction will therefore contain the following data:</p>
<ul>
<li>Recipient address: The Stacks address which should receive the sBTC.</li>
<li>sBTC wallet address: The Bitcoin address maintaining custody of the deposited BTC.</li>
<li>Amount: The amount to deposit.</li>
</ul>
<h3 id="how-the-protocol-responds-to-a-deposit-request"><a class="header" href="#how-the-protocol-responds-to-a-deposit-request">How the protocol responds to a deposit request</a></h3>
<p>When a deposit request is mined on the Bitcoin blockchain, the next Stacks block must contain an sBTC mint transaction to the recipient address with the designated amount.
This is enforced on a consensus level in Stacks, so that Stacks blocks which do not respond to deposit requests are considered invalid by Miners.</p>
<h2 id="withdrawal-request"><a class="header" href="#withdrawal-request">Withdrawal Request</a></h2>
<p>An sBTC withdraw request is a bitcoin transaction containing data and two outputs.
The first output of this transaction marks the recipient address of the BTC to be withdrawn.
The second output of this transaction is a small fee subsidy to the stackers intended to cover the cost of fulfilling the withdrawal.
Finally, the transaction specifies the amount to be withdrawn and signs the amount and recipient address with the Stacks address from which the sBTC should be burned.</p>
<p>To summarize, the sBTC withdrawal transaction will contain the following data:</p>
<ul>
<li>Recipient address: The Bitcoin address which should receive the BTC.</li>
<li>sBTC wallet address: The Bitcoin address maintaining custody of the deposited BTC.</li>
<li>Amount: The amount to withdraw.</li>
<li>Sender address: The Stacks address holding the sBTC to be burned.</li>
</ul>
<h3 id="how-the-protocol-responds-to-a-withdrawal-request"><a class="header" href="#how-the-protocol-responds-to-a-withdrawal-request">How the protocol responds to a withdrawal request</a></h3>
<p>When a withdrawal request is mined on the Bitcoin blockchain, the next Stacks block must contain a sBTC burn transaction burning the requested amount from the sender address.
Once the withdrawal request is final<sup class="footnote-reference"><a href="#1">1</a></sup> on the Stacks blockchain, Stackers must fulfill the withdrawal request on the Bitcoin chain by creating a fulfillment transaction.</p>
<p>The fulfillment transaction is a bitcoin transaction sending the requested withdrawal amount to the designated recipient address specified in the Withdrawal request.</p>
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p>Block finality is a property introduced in the <a href="https://stx.is/nakamoto">Nakamoto release</a> of Stacks, and a requirement for sBTC.</p>
</div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bitcoin-transactions"><a class="header" href="#bitcoin-transactions">Bitcoin Transactions</a></h1>
<p>This page outlines all transactions which happen on the Bitcoin blockchain within the sBTC protocol, and how they are represented on the bitcoin chain.</p>
<h1 id="data-and-opcodes"><a class="header" href="#data-and-opcodes">Data and opcodes</a></h1>
<p>Common to all sBTC transactions on Bitcoin is that they need to embed data on the Blockchain. To enable this, we require all sBTC transactions to have their first output be a script of the form</p>
<pre><code>OP_RETURN &lt; magic bytes | opcode | data &gt;
</code></pre>
<p>where <code>magic bytes</code> are special bytes required by the Stacks blockchain, the <code>opcode</code> identifies the type of the sBTC transaction, and the <code>data</code> field is specific to the transaction type. We use <code>|</code> as the concatenation operator to denote that all information is pushed as a single byte slice to the bitcoin script.</p>
<p>The magic bytes are</p>
<ul>
<li><code>X2</code> for Stacks mainnet</li>
<li><code>T2</code> for Stacks testnet</li>
</ul>
<p>The opcodes for sBTC are</p>
<ul>
<li><code>&lt;</code>: Deposit request</li>
<li><code>&gt;</code>: Withdrawal request</li>
<li><code>!</code>: Withdrawal fulfillment</li>
<li><code>H</code>: sBTC wallet handoff</li>
</ul>
<p>The following sections will go throuch each of these transactions and outline what data and outputs they require.</p>
<h2 id="deposit-request-1"><a class="header" href="#deposit-request-1">Deposit request</a></h2>
<p>The deposit request contains the following data (incl. opcode and magic byte) in its first output</p>
<pre><code>0       2  3                   66
|-------|--|-------------------|
| magic |op| Recipient address |
</code></pre>
<ul>
<li>Magic: <code>X2</code> or <code>T2</code></li>
<li>Opcode: <code>&lt;</code></li>
<li>Recipient address: Either a standard or a contract principal encoded as a Clarity value as defined in <a href="https://github.com/stacksgov/sips/blob/main/sips/sip-005/sip-005-blocks-and-transactions.md#clarity-value-representation">SIP-005</a>.</li>
</ul>
<p>The deposit transaction also has a second output which sends the requested amount to the sBTC wallet address.</p>
<p>TODO: Figure</p>
<h2 id="withdrawal-request-1"><a class="header" href="#withdrawal-request-1">Withdrawal request</a></h2>
<p>The withdrawal request contains the following data (incl. opcode and magic byte) in its first output</p>
<pre><code>0      2  3          11                76
|------|--|----------|-----------------|
 magic  op   amount       signature
</code></pre>
<ul>
<li>Magic: <code>X2</code> or <code>T2</code></li>
<li>Opcode: <code>&gt;</code></li>
<li>Amount: The amount to withdraw, as an 8-byte big-endian unsigned integer.</li>
<li>Signature: A 65 byte recoverable ECDSA signature authenticating the request.</li>
</ul>
<p>The withdrawal request is required to have two additional outputs beyond the data output. The second output is a dust amount to the recipient address. The third output is a fee subsidy to the sBTC wallet to fund the fulfillment of the withdrawal.</p>
<h3 id="signature"><a class="header" href="#signature">Signature</a></h3>
<p>The recoverable ECDSA signature in the withdrawal request ensures the authenticity and integrity of the transaction. Given that we use the secp256k1 elliptic curve (same as Bitcoin), this signature is composed of 65 bytes.</p>
<h4 id="message-format"><a class="header" href="#message-format">Message Format:</a></h4>
<p>Before diving into the signature's byte-level structure, let's clarify the format of the message being signed.</p>
<p>The signature attests to a withdrawal request from a specific stacks principal. The signed message encapsulates:</p>
<ol>
<li><strong>Amount (8 bytes)</strong>: The total amount to withdraw, encoded as an 8-byte big-endian unsigned integer.</li>
<li><strong>Recipient Address (<code>n</code> bytes)</strong>: This represents the intended beneficiary of the withdrawal. It's encoded as a Bitcoin script. The length of this script, denoted by <code>n</code>, can vary depending on the address format and type.</li>
</ol>
<p>These components are concatenated in the given order, resulting in a byte array with a total length of <code>n+8</code>:</p>
<pre><code>0      8                     n+8
|------|----------------------|
 amount        recipient
</code></pre>
<p>The actual message that gets signed is not this byte array directly but its SHA-256 hash, producing a consistent 32-byte digest.</p>
<h4 id="signature-structure"><a class="header" href="#signature-structure">Signature Structure:</a></h4>
<p>Now, with the hashed message ready, the structure of the recoverable ECDSA signature is as follows:</p>
<pre><code>0   1      33      65
|---|------|-------|
  v    r       s
</code></pre>
<ul>
<li>
<p><strong>v (1 byte)</strong>: The recovery ID, a value between 0 and 3. It's a critical component that facilitates the public key's recovery during verification, eliminating the need for its explicit provision.</p>
</li>
<li>
<p><strong>r (32 bytes)</strong>: A value linked to the x-coordinate of a point on the elliptic curve. It's a pivotal element in ECDSA's verification mechanism, effectively serving as proof of the signer's private key ownership.</p>
</li>
<li>
<p><strong>s (32 bytes)</strong>: This, combined with <code>r</code>, constitutes the essence of the ECDSA signature. Together, they confirm the validity and authenticity of the message.</p>
</li>
</ul>
<p>For the withdrawal request to be deemed valid, the signature must match the expected data.</p>
<h2 id="withdrawal-fulfillment"><a class="header" href="#withdrawal-fulfillment">Withdrawal fulfillment</a></h2>
<p>The withdrawal request contains the following data (incl. opcode and magic byte) in its first output</p>
<pre><code>0      2  3                     35
|------|--|---------------------|
 magic  op       Chain tip
</code></pre>
<ul>
<li>Magic: <code>X2</code> or <code>T2</code></li>
<li>Opcode: <code>!</code></li>
<li>Chain tip: The stacks chain tip used to vaildate the withdrawal.</li>
</ul>
<p>The withdrawal fulfillment has a second output which sends the requested amount to the recipient address.
Finally, the withdrawal fulfillment links back to the withdrawal request transaction by consuming the fee subsidy output of the withdrawal request as its first input.</p>
<h2 id="sbtc-wallet-handoff"><a class="header" href="#sbtc-wallet-handoff">sBTC wallet handoff</a></h2>
<p>The sBTC wallet handoff contains the following data (incl. opcode and magic byte) in its first output</p>
<pre><code>0      2  3                     11
|------|--|---------------------|
 magic  op     Reward cycle
</code></pre>
<ul>
<li>Magic: <code>X2</code> or <code>T2</code></li>
<li>Opcode: <code>H</code></li>
<li>Reward cycle: The reward cycle number of the Stacker set handing over the sBTC wallet.</li>
</ul>
<p>The second output sends an amount greater than or equal to the total amount of sBTC in circulation to the sBTC wallet of the next reward cycle.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="commit-reveal-transactions"><a class="header" href="#commit-reveal-transactions">Commit-Reveal Transactions</a></h1>
<p>Thus far, we have have been introduced to some of the Bitcoin transactions that make it possible to interact with sBTC. However, one big drawback of the transaction formats we have been talking about is that they require the creation of custom Bitcoin transactions, which is a moderately sophisticated use case of Bitcoin and thus remains unsupported by some wallets as well as a lot of custodian solutions that are widely used in the current landscape. Cutting out this portion of the Bitcoin ecosystem from being able to use sBTC is not ideal. As a protocol, it is super important that sBTC is accessible to anyone who wants to use it, and this translates to allowing sBTC compatible transactions to be sent from any viable Bitcoin wallet.</p>
<p>To accommodate for this use case, sBTC also supports an alternate transaction wire-format that has universal compatibility with any Bitcoin wallet. Since this scheme uses two transactions to fulfill a sBTC operation, we call it the commit-reveal scheme. As the name suggests, one of the transactions <em>commits</em> the intent of the user and the second transaction <em>reveals</em> it to the protocol.</p>
<p>Note that commit-reveal does not introduce new sBTC operations, but rather an alternate way to <em>express</em> the same operations . From the perspective of the sBTC protocol, these two schemes are completely compatible and interchangeable with each other, in terms of how they are interpreted by the protocol and the effects they produce.</p>
<p>Let's dig a little deeper into the details.</p>
<h2 id="operation-format"><a class="header" href="#operation-format">Operation format</a></h2>
<p>Fundamentally, all sBTC transactions on Bitcoin have to embed some data into the blockchain itself that highlights the intent of the user to interact with the sBTC protocol. The protocol then identifies these intents from the chain and verifies and executes them, thus executing the intent of the user that was previously embedded in the chain.</p>
<p>As long as we have a reliable way to achieve this cycle of embedding an intent into Bitcoin, reading it and processing it, we can fulfill any sBTC operation. Both the direct scheme (SIP-021 style transactions) and transactions that fulfill commit-reveal scheme achieve this, only differing slightly in how the data is embedded into the chain itself.</p>
<p>In the direct scheme, we embed the data directly in the transaction itself, by using an <code>OP_RETURN</code> output.</p>
<p>In the commit reveal scheme, this embedding is done in two stages: the commit transaction and the reveal transaction.</p>
<h3 id="commit-transaction"><a class="header" href="#commit-transaction">Commit transaction</a></h3>
<p>The commit transaction is a very simple transaction with only one requirement: it must contain an output to either a <code>p2tr</code>, <code>p2wsh</code>, <code>p2sh-p2wsh</code> or <code>p2sh</code> address. We need to use these types of addresses because all of them require a user to reveal a script to be spent. We require the revealed script to have the following format:</p>
<pre><code>&lt;DATA&gt; OP_DROP &lt;LOCK SCRIPT...&gt;
</code></pre>
<p>where the <code>DATA</code> part of the script is similar to the corresponding data format of the direct scheme using <code>OP_RETURN</code>, minus the first two magic bytes (that part will be dealt with in the reveal transaction that follows). The data is at most 86 bytes long (the opcode + payload is at most 78 bytes) and also contains an 8 byte chunk that specifies a fee subsidy, i.e. the amount of funds that the reveal transaction is allowed to spend as transaction fees.</p>
<p>The <code>DATA</code> section of the script thus looks like this:</p>
<pre><code>0  1                            n            n + 8
|--|----------------------------|--------------|
 op     sBTC payload               fee subsidy
</code></pre>
<p>where the first byte is the opcode of the sBTC transaction, the payload is essential data required for the specific sBTC operation and the fee subsidy limits the maximum amount of money the reveal transaction is allowed to use as fees.</p>
<h3 id="reveal-transaction"><a class="header" href="#reveal-transaction">Reveal transaction</a></h3>
<p>The reveal transaction is also fairly simple in construction and MUST satisfy the following:</p>
<ol>
<li>It MUST consume an UTXO from a commit transaction as its first input.</li>
<li>The first output MUST be an <code>OP_RETURN</code> output with a three byte payload where the first two bytes are the magic bytes (the same ones we promised to add back) that specify the network they are running on - <code>T2</code> for mainnet and <code>X2</code> for testnet, and the last two bytes is an opcode and a script version byte.
<pre><code>0      2  3         4
|------|--|---------|
 magic  op  version
</code></pre>
</li>
</ol>
<p>The opcode identifies which type of script is revealed. It is <code>w</code> if the script is embedded in segwit witness data, and <code>r</code> if the script is in a p2sh redeem script.</p>
<p>The version identifies the SegWit witness version. It is <code>0</code> for <code>p2wsh</code> scripts and <code>1</code> for <code>p2tr</code> scripts. If the opcode is <code>r</code>, this version byte may be omitted.</p>
<p>Because the reveal transaction consumes the UTXO from the commit transaction, the data that was embedded in the script of the commit transaction is <em>revealed</em>. Thus, when the sBTC protocol observes a bitcoin operation with the opcode <code>w</code> or <code>r</code>, it indicates a reveal transaction and the data for the intended operation by the initiator of the commit transaction can be found in either the witness or redeem script of the first input.</p>
<p>Any remaining outputs of the reveal transaction must be of the same form as in the direct scheme. For instance, the reveal transaction representing an sBTC withdrawal request must contain two additional outputs (just like its direct scheme counterpart) in order: </p>
<ol>
<li>the BTC recipient address </li>
<li>the funding of the fulfillment transaction.</li>
</ol>
<h2 id="processing-the-commit-reveal-scheme-at-the-protocol-level"><a class="header" href="#processing-the-commit-reveal-scheme-at-the-protocol-level">Processing the commit-reveal scheme at the protocol level</a></h2>
<p>Now that we understand how the low level representations of commit-reveal transactions and what they represent, we need to talk about how the sBTC protocol itself interacts with the scheme to ensure fulfillment of such transactions.</p>
<p>On a high level, this diagram summarizes the interactions between the various parties involved in the fulfillment of the commit-reveal scheme:</p>
<pre class="mermaid">sequenceDiagram
  actor User
  User -&gt;&gt; sBTC Committer: 1. Provide sBTC operation data
  sBTC Committer --&gt;&gt; sBTC Revealer: 2. Send witness script and associated data
  sBTC Committer -&gt;&gt; User: 3. Return commit operation address
  User -&gt;&gt; Bitcoin: 4. Broadcast commit transaction
  sBTC Revealer --&gt;&gt; Bitcoin: 5. Read commit transaction
  sBTC Revealer --&gt;&gt; Bitcoin: 6. Broadcast reveal transaction
  Stacks --&gt;&gt; Bitcoin: 7. Process reveal transaction as any sBTC operation
</pre>
<p>More importantly there are three parts of the process that need to interact:</p>
<ol>
<li>The <em>Committer</em> (the person the submitting the <em>commit</em> transaction, initiating the scheme)</li>
<li>The <em>Revealer</em> (the person that consumes <em>commit</em> transactions and initiates reveal transactions)</li>
<li>The Bitcoin blockchain itself, which provides the underlying data layer which is used to express the scheme</li>
</ol>
<p>The <em>Committer</em> can be thought of as a system that interacts with a user wallet and constructs <em>commit</em> transactions (like the sBTC bridge).</p>
<p>The <em>Revealer</em> can be thought of a specific system that participates in the sBTC protocol, maintaining a wallet and can consume <em>commit</em> transactions and broadcast <em>reveal</em> transactions. They probably have convenient API endpoints for the <em>Committer</em> to use to construct Witness data.</p>
<p>Here is an example flow of data through the protocol (for illustration purposes only):</p>
<ol>
<li>User interacts with a web UI of a <em>Committer</em>, providing operation data to construct the commit transaction</li>
<li>The <em>Committer</em> constructs a witness script that can be spent by the <em>Revealer</em></li>
<li>The <em>Committer</em> then sends this witness script and any other associated data that might be required to construct a reveal transaction to the <em>Revealer</em></li>
<li>The <em>Committer</em> returns the address to send the <em>commit</em> operation to the user</li>
<li>User broadcasts the <em>commit</em> transaction by making a payment to the given commit address</li>
<li>The <em>Revealer</em> reads the <em>commit</em> transaction, having already processed the witness script</li>
<li>The <em>Revealer</em> broadcasts the <em>reveal</em> transaction (there can be economic incentives here that makes the <em>Revealer</em> not reveal a <em>commit</em> transaction. For example, if the cost of revealing the transaction is too high, the <em>Revealer</em> might choose to ignore it altogether)</li>
<li>The sBTC protocol picks up the <em>reveal</em> transaction and fulfills it (by interpreting the operation data from the witness script)</li>
</ol>
<p>NOTE: <em>It is entirely possible for the <em>Revealer</em> to steal the witness data and use it for its own benefit, although this will be entire visible on the Bitcoin chain data itself and can be completely traced. Thus, there needs to be some degree of cryptoeconomic incentives present that discourage the <em>Revealer</em> from doing this.</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="the-pox-contract"><a class="header" href="#the-pox-contract">The PoX Contract</a></h1>
<p>Explanation of the PoX contracts and it's public functions. It should be clear which functions a user would interact with, which ones are used by stackers, and which ones that are called as part of Stacks consensus (sBTC mint/burn).</p>
<p>TODO: <a href="https://github.com/stacks-network/sbtc-docs/issues/9">#9</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="stacker-responsibilities"><a class="header" href="#stacker-responsibilities">Stacker responsibilities</a></h1>
<p>One of the most significant changes to accomodate the sBTC design is that Stackers must now perform active work to continue receiving PoX rewards. Stackers collectively maintain a BTC wallet for the duration of each reward cycle in which their STX are locked. This chapter outlines the new role of the stackers, and how they interact with each other to fulfill their duties.</p>
<h2 id="sbtc-wallet-address-generation"><a class="header" href="#sbtc-wallet-address-generation">sBTC wallet address generation</a></h2>
<p>Stackers in sBTC operate in Reward cycles similar to previous versions of <a href="https://github.com/stacksgov/sips/blob/main/sips/sip-007/sip-007-stacking-consensus.md">PoX</a>. However, the reward cycle has been modified to consist of three phases: prepare (80 blocks), handoff (20 blocks), and reward (2000 blocks).</p>
<p>During the prepare phase, miners decide on an anchor block and the next reward cycle's Stackers as before. During the handoff phase, this new set of Stackers MUST collectively determine and provide a single Bitcoin address in the PoX contract to operate as the sBTC wallet address for the next reward cycle. If they fail to do so within the first 10 blocks of the handoff phase, the prepare phase is reinitiated and a new set of stackers will be selected.</p>
<p>If no valid sBTC address is provided, the current set of Stackers' continue operating as before. Their STX will remain frozen, and they will continue to receive PoX rewards until a successful prepare phase and handoff has occurred. However, once the new set of stackers has provided an sBTC wallet address, the current set of Stackers MUST execute a wallet handoff to this newly generated sBTC wallet address.</p>
<h2 id="sbtc-wallet-handoff-1"><a class="header" href="#sbtc-wallet-handoff-1">sBTC Wallet handoff</a></h2>
<p>An sBTC Wallet handoff is used by the current reward cycle's Stackers to send all deposited BTC to the next reward cycle's Stackers' sBTC wallet address within 10 blocks of the reward cycle starting. Additionally, Stackers MUST transfer an <em>equal or greater</em> number of BTC than the amount of sBTC that existed at the end of their own wallet's lifetime. This implies that Stackers MUST cover any fee costs associated with fulfilling sBTC withdrawal requests. </p>
<h2 id="sbtc-withdrawal-fulfillment"><a class="header" href="#sbtc-withdrawal-fulfillment">sBTC Withdrawal fulfillment</a></h2>
<p>To fulfill an sBTC withdrawal request, Stackers send one or more Bitcoin transactions that pay the requested amount of BTC to the withdrawal address stipulated by the withdrawal request. If Stackers have receieved their sBTC wallet handoff and they fail to fulfill a request within 50 Bitcoin blocks of the request being finalized (i.e. at most 150 Bitcoin blocks after the request is submitted), then the system transitions to Recovery mode and PoX payouts are repurposed for fulfilling pending withdrawal requests. </p>
<p>If Stackers do not fulfill the pending sBTC withdrawal requests, their STX will be frozen by .pox and any earned BTC used to fulfill these pending requests. Stackers may only receive back their STX and resume earning BTC once all the withdrawal requests for which they were responsible are fulfilled. </p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="signature-aggregation-with-frost"><a class="header" href="#signature-aggregation-with-frost">Signature Aggregation with FROST</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="wsts-adaptation"><a class="header" href="#wsts-adaptation">WSTS Adaptation</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="signing-protocol"><a class="header" href="#signing-protocol">Signing protocol</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="stackerdb"><a class="header" href="#stackerdb">StackerDB</a></h1>
<p>Covers the StackerDB system and how it works.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sbtc-releases"><a class="header" href="#sbtc-releases">sBTC Releases</a></h1>
<p>Since sBTC is a complex system, we have defined multiple releases of the system to incrementally add functionality and grow the complexity of the system.
These are the planned releases:</p>
<div class="table-wrapper"><table><thead><tr><th>Version</th><th>Name (optional)</th><th>Released</th></tr></thead><tbody>
<tr><td>0.1</td><td>sBTC Developer</td><td></td></tr>
<tr><td>0.2</td><td>sBTC Developer v2</td><td></td></tr>
<tr><td>1.0</td><td>sBTC Nakamoto</td><td></td></tr>
<tr><td>1.1</td><td>sBTC Nakamoto v2</td><td></td></tr>
</tbody></table>
</div>
<p>The following table highlights the main differences between the releases</p>
<div class="table-wrapper"><table><thead><tr><th></th><th>0.1</th><th>0.2</th><th>1.0</th><th>1.1</th></tr></thead><tbody>
<tr><td>sBTC token</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td></tr>
<tr><td>OP_RETURN data</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td></tr>
<tr><td>Commit-Reveal data</td><td></td><td>✅</td><td>✅</td><td>✅</td></tr>
<tr><td>Mainnet</td><td></td><td></td><td>✅</td><td>✅</td></tr>
<tr><td>Open Membership</td><td></td><td></td><td>✅</td><td>✅</td></tr>
<tr><td>Consensus breaking</td><td></td><td></td><td>✅</td><td>✅</td></tr>
<tr><td>Liveness ratio</td><td></td><td></td><td></td><td>✅</td></tr>
<tr><td>Recovery mode</td><td></td><td></td><td></td><td>✅</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="sbtc-developer-release-01"><a class="header" href="#sbtc-developer-release-01">sBTC Developer Release (0.1)</a></h1>
<p>The sBTC Developer Release (sBTC DR) facilitates the complete deposit and withdrawal processes of sBTC, simulating the core mechanics of the sBTC system in the form of a singular service.</p>
<p>This release includes an asset contract alongside a dedicated binary. Primarily designed for use on testnet or local development networks. While it's technically possible for anyone to deploy the sBTC DR on the mainnet, it's not recommended due to its developmental nature.</p>
<p>Upon activation, the sBTC DR binary takes charge: it deploys the asset contract and actively monitors sBTC operations. When a deposit request comes in, the system mints the corresponding sBTC tokens to the specified address. Similarly, upon a withdrawal request, it burns the requisite sBTC tokens and promptly processes the withdrawal, transferring the designated BTC amount to the intended recipient.</p>
<pre class="mermaid">graph TD;
  A[User] --&gt; B[Deposit Request];
  A --&gt; C[Withdrawal Request];
  D[sBTC DR Binary] --&gt; F[Listen to sBTC Operations];
  B --&gt; G[Mint sBTC Tokens];
  C --&gt; H[Burn sBTC Tokens];
  H --&gt; J[Send BTC to Recipient];

  classDef userStyle fill:#f9d457,stroke:#f28482;
  classDef operationStyle fill:#bee3db,stroke:#2a9d8f;
  classDef processStyle fill:#f4a261,stroke:#e76f51;
  class A userStyle;
  class B,C operationStyle;
  class D,F,G,H,I,J processStyle;
  class E operationStyle;
</pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sbtc-developer-release-reference-implementation-plan"><a class="header" href="#sbtc-developer-release-reference-implementation-plan">sBTC Developer release reference implementation plan</a></h1>
<p>The reference implementation of the sBTC developer release, codenamed Alpha Romeo, is currently under implementation in <a href="https://github.com/stacks-network/sbtc/tree/master/romeo">this repository</a>.
Every piece of functionality that is being worked on is formulated as <a href="https://github.com/stacks-network/sbtc/issues">issues</a> with the [sBTC DR] prefix and <code>alpha-romeo</code> label.</p>
<p>For anyone interested in tracking the high-level progress of the Alpha Romeo work, these key issues should provide a good view in how things are progressing.</p>
<ol>
<li>Implement the deposit flow <a href="https://github.com/stacks-network/sbtc/issues/67">#67</a> (completed)</li>
<li>Implement the withdrawal flow <a href="https://github.com/stacks-network/sbtc/issues/68">#68</a> (completed)</li>
<li>Containerize and deploy the release <a href="https://github.com/stacks-network/sbtc/issues/85">#85</a> (completed)</li>
<li>Ensure the bridge is compatible with the latest release <a href="https://github.com/stacks-network/sbtc/issues/86">#86</a></li>
<li>Write developer docs for the release <a href="https://github.com/stacks-network/sbtc-docs/issues/77">#77</a></li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="get-started-with-sbtc-01"><a class="header" href="#get-started-with-sbtc-01">Get Started with sBTC 0.1</a></h1>
<p>The sBTC contract will be deployed on the Stacks testnet by an address that is still to be defined. See <a href="https://github.com/stacks-network/sbtc/issues/178">sbtc/#178</a>.</p>
<p>In sBTC 0.1, the deposit and withdrawal transactions are processed by a central authority (CA). The flow is as follows:</p>
<pre class="mermaid">sequenceDiagram
    actor AB as Alice-BTC
    participant CB as CA-BTC
    participant CS as CA-STX
    actor AS as Alice-STX
    CS -&gt;&gt; CS: deploys contract
    Note over AB, AS: BTC tx before contract deployment are ignored.
    loop
        AB -&gt;&gt; CB: sends BTC (deposit)
        CB -&gt;&gt; CS: processes BTC tx
        CS -&gt;&gt; AS: mints sBTC
    end
    loop
        AB -&gt;&gt; CB: sends dust (withdrawal request)
        CB -&gt;&gt; CS: processes BTC tx
        CS -&gt;&gt; AS: burns sBTC
        CB -&gt;&gt; CB: wait for confirmation of Stacks tx
        CB -&gt;&gt; AB: sends BTC (withdrawal fullfilment)
    end
</pre>
<h2 id="web-app"><a class="header" href="#web-app">Web app</a></h2>
<p>A web interface for the sBTC contract is available at <a href="https://bridge.stx.eco/?net=testnet">https://bridge.stx.eco/?net=testnet</a></p>
<p>The web app allows to deposit and withdraw btc from the peg wallet. It also provides a list of recent deposit and withdrawal transactions.</p>
<h2 id="sbtc-cli"><a class="header" href="#sbtc-cli">sBTC cli</a></h2>
<p>See <a href="https://github.com/stacks-network/sbtc/blob/main/sbtc-cli/README.md">README of the sbtc repo</a> for commands to create and broadcast deposit and withdrawal bitcoin transactions.</p>
<h2 id="sbtc-api"><a class="header" href="#sbtc-api">sBTC API</a></h2>
<p>There is a public API server for the most common tasks in the context of sBTC. Developers can use this API create deposit and withdrawal request, get information about btc transactions,  etc.</p>
<p>Documention is available at <a href="https://bridge.sbtc.tech/bridge-api/docs/">bridge.sbtc.tech</a>.</p>
<h2 id="sbtc-sdk"><a class="header" href="#sbtc-sdk">sBTC SDK</a></h2>
<p>stacks.js has added support for sBTC deposit and withdrawal requests. Current work in progress can be seen at <a href="https://github.com/hirosystems/stacks.js/pull/1554">stacks.js/feat/add-sbtc-contracts</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="get-started-with-sbtc-01-on-devnet"><a class="header" href="#get-started-with-sbtc-01-on-devnet">Get Started with sBTC 0.1 on devnet</a></h1>
<h2 id="local-setup"><a class="header" href="#local-setup">Local setup</a></h2>
<p>Devnet is a setup with a local bitcoin node running regtest, a local stacks node running testnet and connecting to the local bitcoin node. In addition, explorers and api servers are setup to provide easy access to information.</p>
<p>Developers should use docker to setup all required services.</p>
<p>The following steps have to be done</p>
<ol>
<li>Launch devnet.</li>
<li>Deploy sbtc contract.</li>
<li>Launch sBTC binary (Alpha romeo engine).</li>
<li>Use sBTC web app (sBTC Bridge) or sbtc cli.</li>
</ol>
<h3 id="requirements"><a class="header" href="#requirements">Requirements</a></h3>
<ul>
<li>install <a href="https://docs.docker.com/engine/install/">docker</a>.</li>
<li>install <a href="https://github.com/hirosystems/clarinet">clarinet</a>.</li>
<li>checkout main branch of repository <a href="https://github.com/stacks-network/sbtc">github.com/stacks-network/sbtc</a>.</li>
</ul>
<h3 id="configuration-1"><a class="header" href="#configuration-1">Configuration</a></h3>
<p>The default values are set as follows using the same seed phase defined in <code>romeo/asset-contract/settings/Devnet.toml</code>:</p>
<div class="table-wrapper"><table><thead><tr><th>field</th><th>value</th><th>explanation</th></tr></thead><tbody>
<tr><td>seed phrase</td><td>twice kind fence tip hidden tilt action fragile skin nothing glory cousin green tomorrow spring wrist shed math olympic multiply hip blue scout claw</td><td>main/deployer wallet, same as in get_credentials script</td></tr>
<tr><td>peg wallet</td><td>bcrt1pte5zmd7qzj4hdu45lh9mmdm0nwq3z35pwnxmzkwld6y0a8g83nnqhj6vc0</td><td>taproot address from seed phrase</td></tr>
<tr><td>stx deployer</td><td>ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM</td><td>aka wallet.deployer,  uses account index 0</td></tr>
<tr><td>btc deployer</td><td>tb1q3tj2fr9scwmcw3rq5m6jslva65f2rqjxt2t0zh</td><td>p2wpkh using account index 0</td></tr>
<tr><td>stx Alice</td><td>ST2ST2H80NP5C9SPR4ENJ1Z9CDM9PKAJVPYWPQZ50</td><td>uses account index 1</td></tr>
<tr><td>btc Alice</td><td>tb1q3zl64vadtuh3vnsuhdgv6pm93n82ye8qc36c07</td><td>p2wkh address using account index 1</td></tr>
</tbody></table>
</div>
<p>Create configuration file <code>config.json</code> in a new folder <code>romeo/testing</code> with the following content:</p>
<pre><code class="language-json">{
  &quot;stacks_network&quot;: &quot;testnet&quot;,
  &quot;bitcoin_network&quot;: &quot;regtest&quot;,
  &quot;state_directory&quot;: &quot;./state&quot;,
  &quot;mnemonic&quot;: &quot;twice kind fence tip hidden tilt action fragile skin nothing glory cousin green tomorrow spring wrist shed math olympic multiply hip blue scout claw&quot;,
  &quot;stacks_node_url&quot;: &quot;http://localhost:3999&quot;,
  &quot;bitcoin_node_url&quot;: &quot;http://devnet:devnet@localhost:18443&quot;,
  &quot;electrum_node_url&quot;: &quot;tcp://localhost:60401&quot;,
  &quot;contract_name&quot;: &quot;asset&quot;
}
</code></pre>
<p><strong>state_directory</strong>
The folder that should contain the state of the Romeo engine binary relative to the folder <code>testing</code>.</p>
<p>When running the binary the first time,
an empty file <code>log.ndjson</code> is created in the state directory (e.g. <code>testing/state</code>). The file stores the processed transaction events.</p>
<p><strong>Node configurations</strong>
The url and the fees used for transactions the bitcoin node and the stacks node can be configured with <code>stacks_network</code>, <code>bitcoin_network</code>, <code>bitcoin_node_url</code>, <code>stacks_node_url</code>.</p>
<p><strong>contract_name</strong>
The contract name that is used when the contract is deployed. This allows to test the bootstrapping several times on the same network.</p>
<h3 id="launch-devnet"><a class="header" href="#launch-devnet">Launch devnet</a></h3>
<p>See <a href="https://github.com/stacks-network/sbtc/blob/main/devenv/README.md">sbtc/devenv</a> for details.</p>
<p>Check status of all services:</p>
<ul>
<li>(Mempool web) <a href="http://localhost:8083">http://localhost:8083</a></li>
<li>(Stacks explorer) <a href="http://localhost:3000/?chain=testnet&amp;api=http://localhost:3999">http://localhost:3000/?chain=testnet&amp;api=http://localhost:3999</a></li>
<li>(Stacks Api) <a href="http://localhost:3999/v2/info">http://localhost:3999/v2/info</a></li>
</ul>
<p>See <code>romeo/asset-contract/settings/Devnet.toml</code> for seed phrases for pre-filled accounts.</p>
<h3 id="deploy-contract"><a class="header" href="#deploy-contract">Deploy Contract</a></h3>
<p>The local environment defines wallets that are already funded. The deployer wallet is used to deploy the contract using clarinet deployments.</p>
<p>Run the following command to deploy the Clarity contracts <code>asset.clar</code> and <code>clarinet-bitcoin-mini.clar</code></p>
<pre><code>./utils/deploy_contracts.sh
</code></pre>
<h3 id="launch-sbtc-dr-binary"><a class="header" href="#launch-sbtc-dr-binary">Launch sBTC DR binary</a></h3>
<p>While waiting for the contracts to be deployed, open up a separate terminal window and start the sBTC binary from the root of the git repo.</p>
<pre><code>cargo run -p romeo -- -c romeo/testing/config.json
</code></pre>
<h3 id="use-the-sbtc-cli"><a class="header" href="#use-the-sbtc-cli">Use the sBTC cli</a></h3>
<p>First install the sbtc cli using the following command:</p>
<pre><code>cargo install --path sbtc-cli
</code></pre>
<p>There are helper scripts to create and broadcast deposit and withdrawal requests. They are contained in the <code>utils</code> folder of devenv:</p>
<ol>
<li>mint_btc.sh: funds the btc addresses with BTC. Add the number of blocks to mint for the two addresses as parameter.</li>
<li>deposit.sh: deposits a random amount of less than 10,000 sats. sBTC will be received by the deployer stacks address.</li>
<li>withdrawal.sh: withdraws a random amount of less than 2,000 sats.</li>
</ol>
<p>Check the results on Stacks at the deployer address:
http://localhost:3000/address/ST1PQHQKV0RJXZFY1DGX8MNSNYVE3VGZJSRTPGZGM?chain=testnet&amp;api=http://localhost:3999</p>
<p>Check the results on Bitcoin at the txs printed by the sbtc cli.</p>
<h3 id="use-sbtc-app"><a class="header" href="#use-sbtc-app">Use sBTC App</a></h3>
<p>Download the wallet client:</p>
<ul>
<li><a href="https://leather.io/install-extension">Leather Wallet Browser Extension</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="faq-for-sbtc-dr-01"><a class="header" href="#faq-for-sbtc-dr-01">FAQ for sBTC DR 0.1</a></h1>
<h2 id="devenv"><a class="header" href="#devenv">Devenv</a></h2>
<ul>
<li>
<p>What is the meaning of the warning in stacks logs <code>Relayer: Failed to submit Bitcoin transaction</code>?
It is a warning related to stacks mining and not relevant to sBTC transactions.</p>
</li>
<li>
<p>When I run utils/deploy_contracts.sh, I seen an error <code>x Error publishing transactions: RecvError </code>. What does it mean?
The stacks node is not yet started. Wait for a while and try again.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sbtc-02"><a class="header" href="#sbtc-02">sBTC 0.2</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sbtc-10"><a class="header" href="#sbtc-10">sBTC 1.0</a></h1>
<p>TODO: <a href="https://github.com/stacks-network/sbtc-docs/issues/14">#14</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sbtc-11"><a class="header" href="#sbtc-11">sBTC 1.1</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sbtc-technical-roadmap"><a class="header" href="#sbtc-technical-roadmap">sBTC Technical Roadmap</a></h1>
<p>Welcome to the technical roadmap for sBTC, a comprehensive guide that will help you understand our goals, timelines, and the journey we're embarking on to bring our product to life. This roadmap is a dynamic document and we will continually update it as we achieve key milestones and refine our plans.</p>
<pre class="mermaid">gantt
    dateFormat  YYYY-MM-DD
    title       sBTC Development roadmap
    excludes    weekends
    %% (`excludes` accepts specific dates in YYYY-MM-DD format, days of the week (&quot;sunday&quot;) or &quot;weekends&quot;, but not the word &quot;weekdays&quot;.)

    section Milestones
    sBTC 0.1 target date          : milestone, 2023-09-30, 0d
    sBTC 0.2 target date          : milestone, 2023-10-31, 0d
    Nakamoto consensus on testnet : milestone, 2023-12-31, 0d

    section sBTC SDK core
    Core Stacks types              : sdk1, 2023-07-25, 2w
    sBTC transactions              : sdk2, after sdk1, 2w

    section sBTC DR
    Deposit flow            : dr1, 2023-08-21, 2w
    Withdrawal flow         : dr2, after dr1, 2w
    Commit-reveal           : dr3, after dr2, 2w

    section sBTC Nakamoto
    sBTC Signer             : sbtc1, 2023-12-31, 12w
    sBTC Consensus rules    : sbtc2, 2023-12-31, 12w
    sBTC Contracts          : sbtc3, 2023-12-31, 12w
    sBTC Security audit     : sbtc4, 2023-12-31, 12w

    section sBTC UI
    Bridge DR             : ui1, after dr1, 2w
    Transaction tracking  : ui3, after dr1, 2w
    Commit-reveal UI      : ui2, after dr2, 2w

    section sBTC Docs
    sBTC High level            : doc1, 2023-07-25, 1w
    sBTC Inteface              : doc2, after doc1, 4w
    sBTC Releases              : doc3, after doc1, 2w
    sBTC Developer guides      : doc4, after doc2, 4w
    sBTC Nakamoto              : doc5, 2023-12-01, 8w
  
</pre>
<p>Each effort in the roadmap represents a key aspect of our development process. The following sections provide more detail about what we aim to achieve with each effort.</p>
<h2 id="milestones"><a class="header" href="#milestones">Milestones</a></h2>
<p>These target dates represent the aimed releases as defined in <a href="sbtc-releases.html">sBTC Releases</a>. In addition, we also have the &quot;Nakamoto consensus on testnet&quot; milestone, which is when the nakamoto consensus working group aims to have a testnet ready, enabling us to begin working on the consensus breaking sBTC version.</p>
<h2 id="sbtc-sdk-core"><a class="header" href="#sbtc-sdk-core">sBTC SDK Core</a></h2>
<h3 id="core-stacks-types"><a class="header" href="#core-stacks-types">Core Stacks types</a></h3>
<p>This phase of development is dedicated to implementing the fundamental types that sBTC developers require to interact effectively with the Stacks blockchain. With these key primitives in place, developers should be fully equipped to construct arbitrary Stacks transactions, establish connections with Stacks nodes, broadcast their transactions, and monitor the status of these transactions on the blockchain.</p>
<h3 id="sbtc-transactions"><a class="header" href="#sbtc-transactions">sBTC Transactions</a></h3>
<p>In this next phase, our goal is to furnish a comprehensive toolkit for creating and decoding all sBTC-specific transactions on both the Bitcoin and Stacks blockchains. This toolkit is designed to streamline the process of constructing sBTC operations in either OP_RETURN or commit-reveal format to Bitcoin, as well as initiating contract calls to sBTC contract functions on the Stacks blockchain. This development will allow developers to engage with sBTC operations with ease and efficiency.</p>
<h2 id="sbtc-dr"><a class="header" href="#sbtc-dr">sBTC DR</a></h2>
<h3 id="deposit-flow"><a class="header" href="#deposit-flow">Deposit flow</a></h3>
<p>The first part of implementing the <a href="./sbtc-releases/sbtc-dev.html">sBTC Developer Release</a> is to provide a working deposit flow end to end. Once this effort is done, we will have implemented a system capable of monitoring bitcoin testnet for <a href="./sbtc-operations/bitcoin-transactions.html">deposit request transactions</a>. The system responds to these transactions by minting sBTC in a dedicated asset contract, which is also bundled with the developer release.</p>
<h3 id="withdrawal-flow"><a class="header" href="#withdrawal-flow">Withdrawal flow</a></h3>
<p>Once the deposit flow is implemented, the next effort is to ensure withdrawals work end-to-end. This effort is to implement and test that the sBTC DR system is capable of monitoring bitcoin testnet for <a href="./sbtc-operations/bitcoin-transactions.html">withdrawal request transactions</a>. The system responds to these transactions by burning sBTC in the DR asset contract, and subsequently transferring bitcoin to the requested recipient as a fulfillment transaction.</p>
<h3 id="commit-reveal"><a class="header" href="#commit-reveal">Commit-reveal</a></h3>
<p>When deposits and withdrawals work end to end, the first version of the developer release is done. This should be promptly followed by an upgraded version supporting both flows with commit-reveal operations. This version should be able to monitor bitcoin testnet for revealed deposit and withdrawal request transactions. Moreover, the version should also provide a revealer implementation where clients can provide the commit witness script and address allowing the developer release system to reveal the committed transaction.</p>
<h2 id="sbtc-nakamoto"><a class="header" href="#sbtc-nakamoto">sBTC Nakamoto</a></h2>
<p>The secure and decentralized version of sBTC, titled &quot;sBTC Nakamoto&quot;, builds on the updated block production rules introduced in the <a href="https://github.com/stacks-network/stacks/blob/master/sBTC/nakamoto.md">Stacks Nakamoto Release</a>. As we approach this release, the sBTC implementation plan should be refined, but for now we have identified the main components with rough estimates of how much work they will need. The following sections explains those efforts.</p>
<h3 id="sbtc-signer"><a class="header" href="#sbtc-signer">sBTC Signer</a></h3>
<p>The sBTC signer will build on the stacks signer implemented in the Nakamoto Release. This effort is to adapt the signer to maintain custody of the sBTC wallet, so that the stackers can sign and broadcast withdrawal fulfillment transactions, sBTC wallet handoff transactions and reveal transactions in commit-reveal.</p>
<h3 id="sbtc-consensus-rules"><a class="header" href="#sbtc-consensus-rules">sBTC Consensus rules</a></h3>
<p>sBTC requires Stacks consensus to be updated to enforce that sBTC requests mined on Bitcoin are required to be included in Stacks blocks. This is integral to the security of the blockchain and ensures that Stacks blocks which do not process sBTC requests correctly are invalid.</p>
<h3 id="sbtc-contracts"><a class="header" href="#sbtc-contracts">sBTC Contracts</a></h3>
<p>The consensus breaking release includes updates to the <code>.pox</code> contract as well as the introduction of a boot-level sBTC asset contract. These contracts need to be defined and implemented.</p>
<h3 id="sbtc-security-audit"><a class="header" href="#sbtc-security-audit">sBTC Security audit</a></h3>
<p>Before we launch sBTC on the mainnet, we'll do a thorough security check. By engaging expert auditors proficient in blockchain security, we will fortify the sBTC protocol, building trust and confidence among users and stakeholders alike. By making sure everything is secure now, we aim to prevent any problems in the future.</p>
<h2 id="sbtc-ui"><a class="header" href="#sbtc-ui">sBTC UI</a></h2>
<h3 id="bridge-developer-release-dr"><a class="header" href="#bridge-developer-release-dr">Bridge Developer Release (DR)</a></h3>
<p>For our sBTC developer release, it's crucial that the sBTC bridge User Interface (UI) aligns perfectly with our system's functionalities. We're keen on ensuring that the bridge UI not only supports this release but is also thoroughly tested for seamless integration.</p>
<h3 id="tracking-transactions"><a class="header" href="#tracking-transactions">Tracking Transactions</a></h3>
<p>Within our developer release, the bridge UI should stand out in its ability to precisely track each sBTC transaction. This ensures transparency and aids developers in understanding transaction flows.</p>
<h3 id="commit-reveal-interface"><a class="header" href="#commit-reveal-interface">Commit-reveal Interface</a></h3>
<p>With the introduction of commit-reveal in our 0.2 version, the UI needs to be adept at guiding users through the process. It should make it straightforward for users to create commit-transactions and interact with the right smart contract functions or API endpoints. This will help in channeling the commit witness script and address to the designated DR revealer.</p>
<h2 id="sbtc-documentation"><a class="header" href="#sbtc-documentation">sBTC Documentation</a></h2>
<h2 id="sbtc-docs"><a class="header" href="#sbtc-docs">sBTC Docs</a></h2>
<h3 id="sbtc-high-level"><a class="header" href="#sbtc-high-level">sBTC High Level</a></h3>
<p>The high-level sBTC documentation serves to align understanding around the purpose, structure, and components of sBTC. It will offer a bird's eye view of the project, setting the stage for more detailed exploration of specific elements in subsequent sections. This should be the starting point for anyone seeking to gain a basic understanding of what sBTC is and its role within the broader ecosystem.</p>
<h3 id="sbtc-interface-documentation"><a class="header" href="#sbtc-interface-documentation">sBTC Interface Documentation</a></h3>
<p>The sBTC interface guide provides comprehensive details on sBTC transaction structures and user pathways. This ensures that users can seamlessly engage with our system while also equipping developers with the necessary knowledge to innovate and build upon it.</p>
<h3 id="sbtc-releases-1"><a class="header" href="#sbtc-releases-1">sBTC Releases</a></h3>
<p>The sBTC release documentation is a pivotal resource, fostering an understanding of the developmental strides leading up to the full implementation of the sBTC protocol. This section should detail the various releases we've made, drawing attention to how they deviate from the final protocol. It's essential to highlight the simplifications or assumptions each release is predicated on and elucidate why we've chosen to adopt these steps in our development process.</p>
<h3 id="sbtc-developer-guides"><a class="header" href="#sbtc-developer-guides">sBTC Developer Guides</a></h3>
<p>Our developer guides aim to provide a developer-friendly overview of the tools, SDKs, and functionalities offered in the sBTC reference implementation and various releases. These guides are designed to help developers understand and build applications using sBTC, fostering creativity and innovation within the ecosystem. The ultimate goal is to ensure developers can effectively contribute to the growth and diversification of the ecosystem using the sBTC platform.</p>
<h3 id="sbtc-nakamoto-1"><a class="header" href="#sbtc-nakamoto-1">sBTC Nakamoto</a></h3>
<p>The sBTC nakamoto documentation is designed to act as the definitive guide to the sBTC protocol. It will encompass all the requisite details for a comprehensive understanding of its operation, the economic trade-offs involved, and the measures taken to secure the protocol. Combined with the existing interface documentation, this should be thorough enough to serve as a reference for alternative implementations of the protocol, ensuring accurate replication of its design and function.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ethereum-wbtc"><a class="header" href="#ethereum-wbtc">Ethereum wBTC</a></h1>
<h2 id="what-is-wbtc"><a class="header" href="#what-is-wbtc">What is wBTC?</a></h2>
<h2 id="method-of-custody"><a class="header" href="#method-of-custody">Method of Custody</a></h2>
<h2 id="depositwithdrawal-mechanism"><a class="header" href="#depositwithdrawal-mechanism">Deposit/Withdrawal Mechanism</a></h2>
<h2 id="economic-incentives"><a class="header" href="#economic-incentives">Economic Incentives</a></h2>
<h2 id="peg-failure-recovery-mechanisms"><a class="header" href="#peg-failure-recovery-mechanisms">Peg Failure Recovery Mechanisms</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rsk-powpeg"><a class="header" href="#rsk-powpeg">RSK PowPeg</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="liquid-l-btc"><a class="header" href="#liquid-l-btc">Liquid L-BTC</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="avalanche-btcb"><a class="header" href="#avalanche-btcb">Avalanche BTC.b</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="threshold-tbtc"><a class="header" href="#threshold-tbtc">Threshold tBTC</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="clarity-contracts"><a class="header" href="#clarity-contracts">Clarity Contracts</a></h1>
<p>In-depth reference for each function in the sBTC Clarity contracts.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="signer-api"><a class="header" href="#signer-api">Signer API</a></h1>
<p>Reference for the Signer API and how to interact with it.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="faq"><a class="header" href="#faq">FAQ</a></h1>
<p>Ideally we are able to fit all questions into their relevant sections, but this will serve as a fallback in case we need it.</p>
<p>Strongly prefer not needing this section and effectively organizing information into relevant sections. FAQs can become bloated catch-alls when a better option may be to put some more effort into information architecture.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-to-contribute"><a class="header" href="#how-to-contribute">How to Contribute</a></h1>
<p>Contribution guide. Do we want to have two separate guides for how developers and non-developers can get involved and contribute?</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contributors"><a class="header" href="#contributors">Contributors</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="mermaid.min.js"></script>
        <script src="mermaid-init.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
