<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Signer Configuration - sBTC Docs</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction to sBTC</a></li><li class="chapter-item expanded affix "><li class="part-title">User Guides</li><li class="chapter-item expanded "><a href="how-to-deposit-and-withdraw.html"><strong aria-hidden="true">1.</strong> How to Deposit and Withdraw</a></li><li class="chapter-item expanded "><a href="how-to-stacker.html"><strong aria-hidden="true">2.</strong> How to Participate as a Stacker</a></li><li class="chapter-item expanded "><a href="how-to-signer.html"><strong aria-hidden="true">3.</strong> How to Operate a Signer</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="how-to-signer-config.html" class="active"><strong aria-hidden="true">3.1.</strong> Signer Configuration</a></li></ol></li><li class="chapter-item expanded "><a href="applications.html"><strong aria-hidden="true">4.</strong> Applications on sBTC</a></li><li class="chapter-item expanded affix "><li class="part-title">Developer Guides</li><li class="chapter-item expanded "><a href="quickstart.html"><strong aria-hidden="true">5.</strong> Developer Quickstart</a></li><li class="chapter-item expanded "><a href="deposit.html"><strong aria-hidden="true">6.</strong> Initiating a Deposit</a></li><li class="chapter-item expanded "><a href="withdrawal.html"><strong aria-hidden="true">7.</strong> Initiating a Withdrawal</a></li><li class="chapter-item expanded "><a href="sbtc-sdk.html"><strong aria-hidden="true">8.</strong> The sBTC SDK</a></li><li class="chapter-item expanded affix "><li class="part-title">sBTC Design</li><li class="chapter-item expanded "><a href="architecture.html"><strong aria-hidden="true">9.</strong> Architecture Overview</a></li><li class="chapter-item expanded "><a href="sbtc-operations.html"><strong aria-hidden="true">10.</strong> sBTC Requests and Responses</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="sbtc-operations/bitcoin-transactions.html"><strong aria-hidden="true">10.1.</strong> Bitcoin Transactions</a></li><li class="chapter-item expanded "><a href="sbtc-operations/commit-reveal-system.html"><strong aria-hidden="true">10.2.</strong> The Commit-Reveal System</a></li></ol></li><li class="chapter-item expanded "><a href="pox-contract.html"><strong aria-hidden="true">11.</strong> The PoX Contract</a></li><li class="chapter-item expanded "><a href="stacker-responsibilities.html"><strong aria-hidden="true">12.</strong> Stacker responsibilities</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="stacker-responsibilities/frost.html"><strong aria-hidden="true">12.1.</strong> Signature Aggregation with FROST</a></li><li class="chapter-item expanded "><a href="stacker-responsibilities/wsts-adaptation.html"><strong aria-hidden="true">12.2.</strong> WSTS Adaptation</a></li><li class="chapter-item expanded "><a href="stacker-responsibilities/signing-protocol.html"><strong aria-hidden="true">12.3.</strong> Signing Protocol</a></li><li class="chapter-item expanded "><a href="stacker-db.html"><strong aria-hidden="true">12.4.</strong> StackerDB</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">sBTC Project</li><li class="chapter-item expanded "><a href="sbtc-releases.html"><strong aria-hidden="true">13.</strong> sBTC Releases</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-dev.html"><strong aria-hidden="true">13.1.</strong> sBTC 0.1</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-dev/sbtc-dev-reference.html"><strong aria-hidden="true">13.1.1.</strong> Reference implementation plan</a></li><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-dev/get-started.html"><strong aria-hidden="true">13.1.2.</strong> Get Started</a></li></ol></li><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-dev-v2.html"><strong aria-hidden="true">13.2.</strong> sBTC 0.2</a></li><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-nakamoto.html"><strong aria-hidden="true">13.3.</strong> sBTC 1.0</a></li><li class="chapter-item expanded "><a href="sbtc-releases/sbtc-nakamoto-v2.html"><strong aria-hidden="true">13.4.</strong> sBTC 1.1</a></li></ol></li><li class="chapter-item expanded "><a href="sbtc-roadmap.html"><strong aria-hidden="true">14.</strong> sBTC Roadmap</a></li><li class="chapter-item expanded affix "><li class="part-title">sBTC Compared</li><li class="chapter-item expanded "><a href="wbtc.html"><strong aria-hidden="true">15.</strong> Ethereum wBTC</a></li><li class="chapter-item expanded "><a href="powpeg.html"><strong aria-hidden="true">16.</strong> RSK PowPeg</a></li><li class="chapter-item expanded "><a href="lbtc.html"><strong aria-hidden="true">17.</strong> Liquid L-BTC</a></li><li class="chapter-item expanded "><a href="btcb.html"><strong aria-hidden="true">18.</strong> Avalanche BTC.b</a></li><li class="chapter-item expanded "><a href="tbtc.html"><strong aria-hidden="true">19.</strong> Threshold tBTC</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference</li><li class="chapter-item expanded "><a href="clarity-contracts-reference.html"><strong aria-hidden="true">20.</strong> Clarity Contracts</a></li><li class="chapter-item expanded "><a href="signer-api.html"><strong aria-hidden="true">21.</strong> Signer API</a></li><li class="chapter-item expanded "><a href="faq.html"><strong aria-hidden="true">22.</strong> FAQ</a></li><li class="chapter-item expanded affix "><li class="part-title">Contribute</li><li class="chapter-item expanded "><a href="contribute.html"><strong aria-hidden="true">23.</strong> How to Contribute</a></li><li class="chapter-item expanded "><a href="contributors.html"><strong aria-hidden="true">24.</strong> Contributors</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">sBTC Docs</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="signer-configuration"><a class="header" href="#signer-configuration">Signer Configuration</a></h1>
<p>In this guide, we'll explain how to create a TOML configuration file to configure a signer binary. The signer binary is responsible for approving or denying transactions based on certain criteria. We'll cover how to set up a TOML file with all required configuration options as well as some optional validation configuration options.</p>
<h2 id="mandatory-options"><a class="header" href="#mandatory-options">Mandatory Options</a></h2>
<p>The following options all govern signer operation in terms of communication and transaction monitoring, construction, and broadcasting. All of these options are mandatory and must be included in the .toml file for a signer binary to operate.</p>
<ul>
<li>'private_key': the private key of the signer, used for signing sBTC transactions.</li>
<li>'stacks_node_rpc_url': the stacks node running the stackerDB instance which is used for signer communication and transaction monitoring and broadcasting.</li>
<li>'bitcoin_node_rpc_url': the bitcoin node used for transaction monitoring and broadcasting.</li>
</ul>
<h2 id="discretionary-options"><a class="header" href="#discretionary-options">Discretionary Options</a></h2>
<p>A majority of the following options involve validation logic for incoming deposit and withdrawal requests. All of these options are discretionary and may be omitted from the .toml file.</p>
<ul>
<li>'network': one of 'Mainnet', 'Testnet', or 'Devnet'. Defaults to 'Testnet'.</li>
<li>'signer_api_server_url': the url at which to host the signer api server for transaction monitoring. Defaults to &quot;http://localhost:3000&quot;.</li>
<li>'auto_deny_block': the number of blocks before signing deadline to auto deny a transaction waiting for manual review. Defaults to 10.</li>
<li>'auto_approve_max_amount': the maximum dollar amount of a transactions that will be auto approved</li>
<li>'auto_deny_addresses_btc': a list of bitcoin addresses that should trigger an auto deny</li>
<li>'auto_deny_addresses_stx': a list of stx addresses that should trigger an auto approve</li>
</ul>
<h2 id="example-toml-file"><a class="header" href="#example-toml-file">Example TOML File</a></h2>
<p>Below is an example configuration file that might be used by the signer binary.</p>
<pre><code class="language-toml"># config.toml

# Mandatory fields

# Note: Replace 'MY_PRIVATE_KEY' with the actual private key value
signer_private_key = &quot;MY_PRIVATE_KEY&quot;
stacks_node_rpc_url = &quot;http://localhost:9776&quot;
bitcoin_node_rpc_url = &quot;http://localhost:9777&quot;

# Optional fields

auto_approve_max_amount = 500000
network = &quot;Devnet&quot;
# Note: replace &quot;BTC_ADDRESS_*&quot; with actual BTC addresses you wish to deny
auto_deny_addresses_btc = [
    &quot;BTC_ADDRESS_1&quot;,
    &quot;BTC_ADDRESS_2&quot;
]
# Note: replace &quot;STX_ADDRESS&quot; with an actual STX address you wish to deny
auto_deny_addresses_stx = [
    &quot;STX_ADDRESS&quot;
]
</code></pre>
<p>Remember to replace the placeholder values with your actual configuration values.</p>
<p>Now that you have your TOML configuration file set up, your signer binary can load this configuration at runtime and use the specified settings for its operation and transaction validation logic.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="how-to-signer.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="applications.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="how-to-signer.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="applications.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="mermaid.min.js"></script>
        <script src="mermaid-init.js"></script>


    </div>
    </body>
</html>
